# Unit 4 / Backend

## **SCHEMA**

### users

| Field            | Type    | Metadata                            |
| ---------------- | ------- | ---------------------------------- |
| id               | integer | _primary key_ and _autoincrements_ |
| email            | string  | _required_ and _unique_            |
| password         | string  | _required_                         |
| first_name       | string  | _required_                         |
| last_name        | string  | _required_                         |
| shop_name        | string  | _required_                         |
| location_id      | integer | _required_                         |
| role_id          | integer | _required_ and _autogenerated_     |

*Notes:  ```location_id``` and ```role_id``` are foriegn keys!*

### roles

| Field      | Type    | Metadata                           |
| ---------- | ------- | ---------------------------------- |
| id         | integer | _primary key_ and _autoincrements_ |
| role       | string  | _required_ and _unique_            |

Notes: ```role``` can be ```owner``` (id: 1) or ```shopper``` (id: 2).

### locations

| Field      | Type    | Metadata                           |
| ---------- | ------- | ---------------------------------- |
| id         | integer | _primary key_ and _autoincrements_ |
| location   | string  | _required_ and _unique_            |

Notes: ```location``` can be ```KEN``` (id: 1), ```TZA``` (id: 2), ```RWA``` (id: 3), or ```UGA``` (id: 4).

### products

| Field            | Type    | Metadata                           |
| ---------------- | ------- | ---------------------------------- |
| id               | integer | _primary key_ and _autoincrements_ |
| item_name        | string  | _required_                         |
| price            | float   | _required_                         |
| description      | string  | _optional_                         |
| user_id          | integer | _required_                         |
| category_id      | integer | _required_                         |

Notes: ```user_id``` and ```category_id``` are foreign keys!

### categories

| Field          | Type    | Metadata                           |
| ----------     | ------- | ---------------------------------- |
| id             | integer | _primary key_ and _autoincrements_ |
| category_name  | string  | _required_ and _unique_            |

Notes: These are ```animal products``` (id: 1), ```cereals``` (id: 2), ```clothing and shoes``` (id: 3), ```cosmetics``` (id: 4), ```fruits``` (id:5), ```seeds and nuts``` (id:6), ```vegetables``` (id:7), and ```other``` (id:8).


## **ENDPOINTS**
root url: https://tt-202-african-marketplace.herokuapp.com

### POST /api/auth/register/owner

request
```json
{
	"email": "jamboojam@email.com",
	"password": "iL0<3j@M",
	"first_name": "Jami",
	"last_name": "Boo",
	"shop_name": "Jam Boo Jams",
	"location_id": "4"
}
```

response:
```json
{
    "message": "Thank you for registering, Jami!", 
	"email": "jamboojam@email.com",
	"shop_name": "Jam Boo Jams",
}
```

#### POST api/auth/login

request data:

```json
{
	"email": "jamboojam@email.com",
	"password": "iL0<3j@M",
}
```

response data:
```json
{
    "message": "Welcome, Jami",
    "id": "1",
	"token": "long.mishmash.token",
}
```

